define(["zepto"],function(a){var b={confirmLayer:function(b){var c,d,e,f;c=function(){var b=a("#cLayer");b.length||a("body").append('<section id="cLayer" style="display:none"><div class="layer"><section><span class="point"></span><strong></strong><div class="chose"><span class="react cancel"></span><span class="react accept"></span></div></section></div></section>'),d(a("#cLayer"))},d=function(a){setTimeout(function(){a.show(),e()},400)},f=function(b){setTimeout(function(){a("#cLayer").hide()},400)},e=function(c){var d,e,g;d=a("#cLayer strong"),e=a("#cLayer .accept"),g=a("#cLayer .cancel"),d.text(b.tit),e.text(b.accept.label),g.text(b.cancel.label),e.off("tap click"),g.off("tap click"),e.on("tap click",function(c){b.accept.callBack&&b.accept.callBack.call(a("#cLayer")),c.preventDefault(),c.stopPropagation()}),g.on("tap click",function(a){b.cancel.callBack&&b.cancel.callBack.call(this),a.preventDefault(),a.stopPropagation(),f()}),a("#cLayer").on("tap",function(a){a.stopPropagation(),f()}),a("#cLayer").children().on("tap",function(a){a.stopPropagation(),a.preventDefault()})},c()},alert:function(b){var c,d,e,f;c=function(){var b=a("#alert");b.length||a("body").append('<section id="alert"><div class="alert"><section><span class="point"></span><p></p><div class="chose"><span class="react accept">知道了</span></section></div></section>'),e(a("#alert"))},e=function(a){setTimeout(function(){a.show(),d()},300)},f=function(){setTimeout(function(){a("#alert").hide()},400)},d=function(){a("#alert p").html(b),a("#alert .accept").one("tap click",function(a){a.stopPropagation(),f()}),a("#alert").one("tap",function(a){f(),a.stopPropagation()})},c()},error:function(b){function c(){a(".error-layer").removeClass("show")}var d=null;clearInterval(d),a(".error-layer").length||a("body").append('<div class="error-layer"></div>'),a(".error-layer").html("<span>"+b+"</span>").addClass("show"),d=setTimeout(c,1e3)},layer:function(b){var c,d=a("#layer");d.length||(c=a('<div id="layer" style="display:none">'),c.html(b),a("body").append(c)),setTimeout(function(){a("#layer").show()},400),a("#layer").one("tap",function(b){var c=this;b.stopPropagation(),setTimeout(function(){a(c).hide()},400)}),a("#layer").children().on("tap click",function(a){a.stopPropagation()})},loadingData:function(){var b=function(b){var c=a("#loading"),d=b||"努力加载中...";c.length||a("body").append('<div id="loading"> '+d+" </div>"),a("#loading").css("opacity",1).html(b)};return{hide:function(){a("#loading").css("opacity",0)},show:b}}};return b});